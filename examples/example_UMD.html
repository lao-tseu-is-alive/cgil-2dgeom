<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Testing cgil-2dgeom with UMD library</title>
  <script src="../dist/cgil2dgeom.min.js"></script>
  <style>
    html{
      font-family: Arial, Helvetica;
      font-size: 1.2rem;
    }
    #cgcode {
      background: #000066;
      color: rgba(121, 245, 20, 0.91);
      border: solid 1px;
      padding: 1em;
    }
    svg {
      background-color: #333333;
    }
  </style>
</head>
<body>
<h2>Testing cgil-2dgeom with UMD library</h2>
<p>This page is to test usage of the UMD version of the library in the browser 
  <a href="https://poi.js.org/#/recipes/cjs-and-umd-format">(more info on library format in POI web...)</a></p>

<pre id="cgcode"></pre>
<p>Now let's create a nice 5 petal's flowers using a polar equation : <strong>r = a sin 5Î¸ </strong></p>
<svg height="500" width="500">
  <line  id='xaxis' x1="250" y1="0" x2="250" y2="500" style="stroke:rgb(255,255,255);stroke-width:2" />
  <line  id='yaxis' x1="0" y1="250" x2="500" y2="250" style="stroke:rgb(255,255,255);stroke-width:2" />
  <polyline id='mypolargraph' points="0,40 40,40 40,80 80,80 80,120 120,120 120,160"
  style="fill:yellow;stroke:red;stroke-width:4" />
</svg>

<script type="application/javascript">
  let ElCode = document.getElementById('cgcode')
  let P0 = new cgil2dgeom.Point()
  log('P0 : ' + P0.toString())
  let P1 = new cgil2dgeom.Point(1,1)
  log('P1 : ' + P1.toString())
  let L1 = new cgil2dgeom.Line(P0, P1)
  log('L1 : ' + L1.toString())
  
  let ElPolyPolarGraph = document.getElementById('mypolargraph')
  function log(msg) {
    ElCode.innerHTML += '<br>' + msg
    console.log(msg)
  }
  let circleDiameter = 150
  let coordinatesString = '' // to accumulate the points coordinates
  // let's center the drawing on the svg
  const offsetX = 250 
  const offsetY = 250
  // let's iterate over a full 360 degree circle
  for (let angle = 0; angle < 360; angle += 2) {
    // let's draw a 5 petal polar equation https://faculty.math.illinois.edu/~rasekh2/math231(s2016)/PolarEquations.pdf
    let radius = circleDiameter * Math.sin(5 * cgil2dgeom.utils.getRadians(angle)) // need to convert to radians
    // create the point with the 2dgeom class
    let TempPoint = cgil2dgeom.Point.fromPolar(radius, angle)
    // and move the point so it's centered
    TempPoint.moveRel(offsetX,offsetY)
    coordinatesString += TempPoint.toStr(',', false)  + ' '
    // log(`angle : ${angle}, radius ${radius} : ${TempPoint.toString(',')}`)
  }
  log('coordinates :' + coordinatesString)
  // update the points in the existing svg polyline to get the flower on screen
  ElPolyPolarGraph.setAttribute('points', coordinatesString)
  
</script>
</body>
</html>